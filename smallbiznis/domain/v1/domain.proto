syntax = "proto3";

package smallbiznis.domain.v1;

import "google/protobuf/timestamp.proto";

option go_package = "github.com/smallbiznis/go-genproto/smallbiznis/domain/v1;domainv1";

message Domain {
  string id = 1;
  string tenant_id = 2;
  string domain = 3;
  bool is_primary = 4;
  string verification_status = 5; // UNVERIFIED, PENDING, VERIFIED, FAILED
  string txt_record = 6;
  google.protobuf.Timestamp verified_at = 7;
  google.protobuf.Timestamp created_at = 8;
  google.protobuf.Timestamp updated_at = 9;
  string status = 10; // ACTIVE, INACTIVE, DELETED
}

message CreateDomainRequest {
  string tenant_id = 1;
  string domain = 2;
  bool is_primary = 3;
  string txt_record = 4;
  string status = 5;
}

message CreateDomainResponse {
  Domain domain = 1;
}

message GetDomainRequest {
  string id = 1;
  string tenant_id = 2;
}

message GetDomainResponse {
  Domain domain = 1;
}

message UpdateDomainRequest {
  string id = 1;
  string tenant_id = 2;
  string domain = 3;
  bool is_primary = 4;
  string verification_status = 5;
  string txt_record = 6;
  google.protobuf.Timestamp verified_at = 7;
  string status = 8;
}

message UpdateDomainResponse {
  Domain domain = 1;
}

message DeleteDomainRequest {
  string id = 1;
  string tenant_id = 2;
}

message DeleteDomainResponse {
  bool success = 1;
}

message ListDomainsRequest {
  string tenant_id = 1;
  int32 page = 2;
  int32 page_size = 3;
}

message ListDomainsResponse {
  repeated Domain domains = 1;
  int32 page = 2;
  int32 page_size = 3;
  int64 total_count = 4;
}

message VerifyDomainRequest {
  string id = 1;
  string tenant_id = 2;
}

message VerifyDomainResponse {
  Domain domain = 1;
}

service DomainService {
  rpc CreateDomain(CreateDomainRequest) returns (CreateDomainResponse);
  rpc GetDomain(GetDomainRequest) returns (GetDomainResponse);
  rpc UpdateDomain(UpdateDomainRequest) returns (UpdateDomainResponse);
  rpc DeleteDomain(DeleteDomainRequest) returns (DeleteDomainResponse);
  rpc ListDomains(ListDomainsRequest) returns (ListDomainsResponse);
  rpc VerifyDomain(VerifyDomainRequest) returns (VerifyDomainResponse);
}
