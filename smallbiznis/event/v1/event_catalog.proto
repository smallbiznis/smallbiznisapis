syntax = "proto3";

package smallbiznis.event.v1;

option go_package = "github.com/smallbiznis/go-genproto/smallbiznis/event/v1;eventv1";

import "google/protobuf/struct.proto";

// EventSubject enumerates canonical subject strings used across the billing
// platform. Subjects follow the pattern "<domain>.<action>.v1".
enum EventSubject {
  EVENT_SUBJECT_UNSPECIFIED = 0;
  EVENT_SUBJECT_TENANT_CREATED_V1 = 1;           // "tenant.created.v1"
  EVENT_SUBJECT_CUSTOMER_CREATED_V1 = 2;         // "customer.created.v1"
  EVENT_SUBJECT_SUBSCRIPTION_CREATED_V1 = 3;     // "subscription.created.v1"
  EVENT_SUBJECT_SUBSCRIPTION_CANCELED_V1 = 4;    // "subscription.canceled.v1"
  EVENT_SUBJECT_BILLING_USAGE_RECORDED_V1 = 5;   // "billing.usage.recorded.v1"
  EVENT_SUBJECT_BILLING_RATING_COMPLETED_V1 = 6; // "billing.rating.completed.v1"
  EVENT_SUBJECT_BILLING_INVOICE_CREATED_V1 = 7;  // "billing.invoice.created.v1"
}

// EventCatalogEntry describes a subject and its string representation.
message EventCatalogEntry {
  EventSubject subject = 1;
  string subject_str = 2;
  string source_service = 3;
  string description = 4;
  google.protobuf.Struct sample_payload = 5;
}

// EventCatalog aggregates all subjects for documentation and validation.
message EventCatalog {
  repeated EventCatalogEntry events = 1;
}

// EventCatalogService exposes a read-only registry of supported subjects.
service EventCatalogService {
  rpc ListEvents(google.protobuf.Struct) returns (EventCatalog) {}
}
