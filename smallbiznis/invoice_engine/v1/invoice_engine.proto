syntax = "proto3";

package smallbiznis.invoice_engine.v1;

option go_package = "github.com/smallbiznis/go-genproto/smallbiznis/invoice_engine/v1;invoiceenginev1";

import "google/protobuf/timestamp.proto";

// GenerateInvoiceRequest triggers invoice creation for a subscription billing
// period based on rating results.
message GenerateInvoiceRequest {
  // Tenant that owns the subscription and will issue the invoice.
  string tenant_id = 1;
  // Customer to bill.
  string customer_id = 2;
  // Subscription being billed.
  string subscription_id = 3;
  // Inclusive period start for the invoice.
  google.protobuf.Timestamp period_start = 4;
  // Exclusive period end for the invoice.
  google.protobuf.Timestamp period_end = 5;
}

// GenerateInvoiceResponse returns the identifier of the created invoice.
message GenerateInvoiceResponse {
  string invoice_id = 1;
}

// InvoiceEngineService orchestrates rating outputs into persisted invoices.
service InvoiceEngineService {
  // Generate an invoice for the given subscription and billing window.
  rpc GenerateInvoice(GenerateInvoiceRequest) returns (GenerateInvoiceResponse);
}
